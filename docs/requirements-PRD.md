# Pagemaker 产品需求文档 (PRD)

**版本:** 1.1
**日期:** 2025年6月8日
**作者:** John (产品经理)

## 1. 目标、目的和背景 (Goal, Objective and Context)

### 1.1 项目目标 (Project Goal)
Pagemaker 项目的核心目标是为乐天店铺运营团队提供一个内部使用的、安全可靠且高效的可视化CMS系统。通过此系统，团队成员（即使非技术背景）能够独立、快速地创建和管理具有专业设计水准和独特风格的商品页面、专题页及店铺首页。最终旨在提升品牌形象、用户体验和营销转化效果，同时有效规避因使用外部第三方工具可能带来的数据安全风险。

### 1.2 主要目的 (MVP Objectives)
为达成上述目标，Pagemaker的最小可行产品（MVP）将实现以下具体目的：
* **交付核心编辑器:** 成功上线一个基于模块化、拖拽式交互的可视化页面编辑器。
* **实现基础模块功能:** 提供一套稳定、易用的基础内容模块（标题、文本、图片、分隔、两列式表格）和精选的高级模块（如多列图文、视频播放器）。
* **支持HTML导出:** 实现一键导出干净、标准的HTML代码功能，以支持当前手动粘贴到乐天后台的工作流程。
* **确立优秀的用户体验:** 确保CMS本身的操作界面简洁、现代、直观，并借鉴竞品分析结果，避免已知的设计缺陷和易误操作问题。

### 1.3 项目背景与问题陈述 (Project Background & Problem Statement)
目前，乐天店铺运营团队在创建和更新商品页面时，面临的主要挑战包括：现有工具可能无法高效产出具有足够设计吸引力和独特性的页面，这对于提升品牌形象和竞争力至关重要。此外，团队成员多为非技术背景，直接操作HTML或复杂的前端工具存在障碍。更重要的是，依赖外部第三方页面编辑工具可能引发API权限滥用，导致店铺销售数据等敏感商业信息泄露的安全隐患。因此，开发Pagemaker这一内部专用CMS，旨在解决设计局限性、提升操作便捷性，并从根本上保障店铺数据安全。

## 2. 功能需求 (MVP)

Pagemaker MVP版本的功能需求通过以下两个史诗（Epics）及其包含的用户故事（User Stories）来定义。

## 3. 非功能需求 (MVP)

### 3.1 易用性 (Usability)
* **NFR1.1 (上手门槛):** 系统应设计得足够直观，内部运营团队成员无需专门的长时间培训即可上手使用核心的页面编辑和模块配置功能。
* **NFR1.2 (界面设计):** CMS界面应保持简洁、现代、操作直观，避免视觉混乱和不必要的操作复杂性。
* **NFR1.3 (帮助文档 - Post-MVP):** 考虑在Post-MVP阶段加入简单的图文操作引导或内部Wiki文档。

### 3.2 性能 (Performance)
* **NFR2.1 (编辑器响应速度):** Pagemaker编辑器内的主要操作（如拖拽模块、编辑文本、配置属性）应提供即时或近乎即时的响应（目标在1-2秒内完成）。
* **NFR2.2 (HTML生成速度):** HTML代码的生成和导出过程应能即时或在数秒内完成。
* **NFR2.3 (导出代码质量):** 生成的HTML代码必须简洁、符合Web标准、语义化，并进行基础优化。
* **NFR2.4 (部署模式考量):** 用户倾向于将Pagemaker开发为网页项目 (Web Project)，此偏好将提交给架构设计阶段进一步评估。

### 3.3 安全性 (Security)
* **NFR3.1 (核心安全目标):** Pagemaker作为内部工具，首要安全目标是保障店铺数据安全，防止敏感信息泄露。
* **NFR3.2 (MVP认证机制):** MVP阶段，Pagemaker系统（若需独立登录）的访问认证采用简单的用户名和密码机制。
* **NFR3.3 (Post-MVP认证机制):** Post-MVP阶段，考虑实现与公司未来OA系统的统一认证。

### 3.4 可靠性与稳定性 (Reliability & Stability)
* **NFR4.1 (草稿自动保存):** 系统应提供草稿自动保存机制。
* **NFR4.2 (关闭前提示保存):** 当用户尝试关闭包含未保存更改的编辑页面时，系统应给出明确提示。
* **NFR4.3 (操作稳定性):** 日常编辑操作应稳定可靠，避免无故的系统错误或崩溃。

### 3.5 可维护性 (Maintainability)
* **NFR5.1 (代码质量与文档):** 代码应遵循良好的编程规范，结构清晰，关键逻辑部分有必要的注释，以便于后续维护。
* **NFR5.2 (模块化扩展):** CMS的模块化设计应支持未来相对容易地添加新类型的内容模块。

### 3.6 国际化 (Internationalization)
* **NFR6.1 (多语言支持):** 系统必须支持中文、日文、英文三种语言的显示。

### 3.7 时区一致性 (Timezone Consistency)
* **NFR7.1 (UTC标准):** 系统所有时间相关的处理和存储，必须统一使用UTC标准时，仅在前端UI展示时转换为本地时间，以从根本上避免时区混乱问题。


## 4. 用户交互与设计目标 (User Interaction and Design Goals)

### 4.1 Pagemaker CMS 核心用户体验目标
* **UIDG1.1 (直观易用):** 确保非技术背景的运营人员无需培训或仅需少量引导即可快速上手。
* **UIDG1.2 (高效流畅):** 核心交互（如拖拽、编辑）应流畅、响应迅速。
* **UIDG1.3 (安全感与容错):** 提供自动保存等机制，减少用户因误操作导致的数据丢失风险。

### 4.2 Pagemaker CMS 视觉风格与界面设计
* **UIDG2.1 (现代简洁):** 整体视觉风格追求现代、简洁、清爽，避免界面混乱、按钮过多。
* **UIDG2.2 (专业感):** 设计需体现专业感，给用户以可靠、高效的印象。
* **UIDG2.3 (预览优先):** 模块选择时应提供预览功能。
* **UIDG2.4 (明确的编辑状态):** 模块操作应有明确的状态区分，避免误触。
* **UIDG2.5 (辅助v0.dev提示词生成):** Pagemaker的设计和信息组织应力求清晰、结构化，以便能从中提炼出有效的提示词，辅助UI生成过程。

### 4.3 Pagemaker 创建的乐天页面设计目标
* **UIDG3.1 (视觉吸引力与独特性):** 赋能用户创建出比以往更具视觉吸引力、风格新颖且独特的乐天页面。
* **UIDG3.2 (响应式设计):** 生成的所有页面模块和布局，必须支持响应式。

### 4.4 关键交互范式
* **UIDG4.1 (拖拽式模块化编辑):** 核心交互模式为拖拽式模块化编辑。
* **UIDG4.2 (模块操作交互):** 模块在画布上可通过拖拽调整位置。当模块被选中时，其内容应允许直接编辑，其属性应立即在属性面板中显示和修改。其他非核心或破坏性操作（如复制、删除、查看代码等）应通过二级交互机制（如“更多操作”菜单）触发。

### 4.5 无障碍访问性 (Accessibility)
* **UIDG5.1 (MVP范围):** MVP阶段暂不将高级别的无障碍访问性作为强制要求，但应遵循基本的Web可访问性最佳实践。

### 4.6 品牌元素融入 (Branding Considerations)
* **UIDG6.1 (CMS内部品牌):** Pagemaker CMS系统界面本身应融入公司品牌元素（如Logo）。
* **UIDG6.2 (乐天页面品牌):** 生成的乐天页面内容，无需在CMS层面强制预留品牌区域。

### 4.7 Pagemaker CMS的核心界面/视图 (Core CMS Screens/Views - MVP)
* **UIDG7.1 (页面/模板管理视图):** MVP阶段必须包含一个“页面/模板管理”视图，支持列表展示、按文件夹/店铺组织、以及对每个页面的编辑、复制、删除操作。
* **UIDG7.2 (主编辑界面):** 包括模块选择面板、可视化编辑画布、模块属性配置区等核心功能区域。

## 5. 技术假设 (Technical Assumptions)

### 5.1 仓库与服务架构模式
* **仓库结构:** 倾向于采用 **Monorepo（单一代码库）** 的方式进行项目管理。
* **服务架构:** 采用 **前后端分离** 的开发模式。后端具体的服务架构（单体或微服务）将由架构师在下一阶段评估确定。

### 5.2 前端技术栈与UI生成
* 前端UI的初步生成将主要依赖 **v0.dev** 工具。
* 基于v0.dev的输出，前端技术栈预计将包括：
    * 框架: **Next.js 15.3**
    * UI库: **shadcn/ui 2.6**
    * CSS框架: **Tailwind CSS 4.1**
    * Hooks库: **ahooks**
* 需重点关注v0.dev生成代码的质量、可维护性及集成兼容性。

### 5.3 后端技术栈
* 后端技术选型已在架构设计阶段确定为 **Python**的**Django**框架。这个决策是基于开发者对该框架的熟练度，以期在MVP阶段最大化开发效率。

### 5.4 数据库技术
* 项目数据库选用 **MySQL，版本要求 8.4及以上**。

### 5.5 核心外部依赖
* 系统将深度依赖**乐天API**和**乐天R-Cabinet**。
* 已知乐天API文档的特性（网页形式、需登录）为潜在开发挑战。

### 5.6 未来系统集成
* 项目远期规划中，需要考虑与公司内部正在开发的 **OA系统** 对接。

### 5.7 技术选型总体原则
* 以“最适合当前项目需求的最优方案”为原则，具体由架构师评估决定。

## 6. 史诗和用户故事 (Epic Overview)

### **史诗 1: CMS核心编辑与基础模块实现**
* **目标 (Goal):** 搭建Pagemaker的核心可视化编辑器框架，实现所有基础内容模块的创建、编辑和HTML导出功能，确保运营团队能够用基础模块搭建和导出简单的页面内容。

#### **用户故事 (User Stories - Epic 1)**

##### **Story 1.1: 可视化编辑器基本框架**
* **用户故事:** 作为运营专员，我希望能在一个可视化的编辑界面中搭建页面布局，以便直观地安排内容模块，并能实时预览大致效果。
* **验收标准 (ACs):**
    1. CMS界面包含清晰划分的模块列表区、编辑画布区、属性编辑区。
    2. 用户能将注意力集中在画布区进行编排。
    3. 画布区能大致反映页面的实时预览效果，并随配置更改而更新。
    4. 编辑器界面在主流桌面浏览器上能正确显示和操作。
    5. 用户能清晰地选择或看到当前正在编辑的乐天店铺“目标区域”。

##### **Story 1.2: 模块基本操作**
* **用户故事:** 作为运营专员，我希望能够从模块列表中将内容模块拖拽到编辑区域，并能调整它们的顺序和删除它们，以便灵活地构建页面。
* **验收标准 (ACs):**
    1. 编辑器界面展示一个包含所有可用基础内容模块的列表。
    2. 用户能通过拖拽将模块放置到画布区。
    3. 拖拽过程中有清晰的视觉指示。
    4. 用户能通过拖拽改变已在画布区中模块的顺序。
    5. 用户能通过明确的二级菜单操作将模块从画布中移除。
    6. 本故事专注于模块的添加、排序和删除等容器级操作。

##### **Story 1.3: 页面HTML导出**
* **用户故事:** 作为运营专员，我希望能够一键导出当前在编辑器中构建的页面的完整、干净的HTML代码，以便将其手动粘贴到乐天店铺后台。
* **验收标准 (ACs):**
    1. 编辑器界面提供清晰的“导出页面HTML”入口。
    2. 点击后，系统能将画布内容准确转换为一个完整的HTML文档结构。
    3. 生成的HTML代码应相对纯净，减少CMS编辑器自身相关的辅助代码。
    4. 导出时，系统应允许用户方便地将生成的完整页面HTML代码**复制到剪贴板**，无需下载文件功能。

##### **Story 1.4: 标题模块集成与配置**
* **用户故事:** 作为运营专员，我希望能够在Pagemaker编辑器中使用“标题模块”，并能设置其文本内容、标题级别、对齐方式、字体和加粗，以便在页面中添加和定制各种标题。
* **验收标准 (ACs):**
    1. 用户能将“标题模块”添加到画布上。
    2. 用户能直接编辑模块内的文本内容。
    3. 用户能在属性面板中选择HTML标题级别 (H1-H6)。
    4. 用户能在属性面板中设置文本对齐方式。
    5. 用户能在属性面板中选择预设字体和设置是否加粗。
    6. 导出的HTML能正确反映所有配置。
    7. 编辑器中的预览能实时更新。

##### **Story 1.5: 文本模块集成与配置**
* **用户故事:** 作为运营专员，我希望能够在Pagemaker编辑器中使用“文本模块”，并能编辑其文本内容、进行基础格式化、设置对齐方式、字体、颜色以及文本块背景色，以便在页面中添加和排版段落文字。
* **验收标准 (ACs):**
    1. 用户能将“文本模块”添加到画布上。
    2. 用户能编辑模块内的多段文本内容。
    3. 用户能对选中文本进行格式化（加粗、下划线、超链接）。
    4. 用户能设置文本的整体对齐方式。
    5. 用户能选择预设字体、文本颜色，并能设置文本块背景色。
    6. 导出的HTML能正确反映所有配置。
    7. 编辑器中的预览能实时更新。

##### **Story 1.6: 单张图片模块集成与配置**
* **用户故事:** 作为运营专员，我希望能够在Pagemaker编辑器中使用“单张图片模块”，并能从R-Cabinet上传/选择图片、设置alt文本、对齐方式、添加链接和调整显示尺寸，以便在页面中灵活地展示图片。
* **验收标准 (ACs):**
    1. 用户能将“单张图片模块”添加到画布上。
    2. 用户能从本地上传新图片到R-Cabinet，或从R-Cabinet中选择已有图片。
    3. 用户能为图片设置“alt”文本。
    4. 用户能为图片设置对齐方式。
    5. 用户能为图片添加多种类型的超链接（URL、Email、Phone、Anchor）。
    6. 用户能通过预设选项或百分比调整图片显示尺寸。
    7. 导出的HTML能正确反映所有配置。
    8. 编辑器中的预览能实时更新。

##### **Story 1.7: 分隔模块集成与配置**
* **用户故事:** 作为运营专员，我希望能够在Pagemaker编辑器中使用“分隔模块”，并能选择其类型（线条或空白间距）以及配置其基本样式，以便在页面中分隔内容或创建视觉间距。
* **验收标准 (ACs):**
    1. 用户能将“分隔模块”添加到画布上。
    2. 用户能在属性面板中选择类型：线条分隔或空白间距。
    3. 当类型为线条时，用户能配置其样式、颜色和粗细。
    4. 当类型为空白时，用户能选择其预设高度。
    5. MVP阶段，模块默认撑满容器宽度。
    6. 导出的HTML能正确反映所有配置。
    7. 编辑器中的预览能实时更新。

##### **Story 1.8: 两列式键值对/表格模块集成与配置**
* **用户故事:** 作为运营专员，我希望能够在Pagemaker编辑器中使用“两列式键值对/表格模块”，并能输入/管理键值对行、设置标签列背景色和文本颜色，以便在页面中清晰地展示商品属性等信息。
* **验收标准 (ACs):**
    1. 用户能将“两列式键值对/表格模块”添加到画布上。
    2. 用户能在属性面板中输入多组成对的“标签/键”和“内容/值”。
    3. 用户能方便地增加或删除键值对行。
    4. 用户能在属性面板中为文本选择颜色，并为标签列设置背景色。
    5. 导出的HTML能正确反映所有配置。
    6. 编辑器中的预览能实时更新。
    7. 选中模块后，用户可以在属性面板中方便地输入和管理键值对行，这些数据将作为页面内容JSON结构的一部分，通过`PUT /api/v1/pages/{id}/ `接口进行统一保存。’



### **史诗 2: 高级内容模块与页面管理MVP功能**
* **目标 (Goal):** 在核心编辑器基础上，集成选定的高级内容模块，并实现MVP版本的页面/模板管理功能，以提升页面内容表达的丰富性和Pagemaker CMS的整体可用性。

#### **用户故事 (User Stories - Epic 2)**

##### **Story 2.1: 多列图文模块集成与配置**
* **用户故事:** 作为运营专员，我希望能在Pagemaker编辑器中使用“多列图文模块”，并能从四种预设布局中选择，以及方便地配置其中的图片和文本内容，以创建更丰富的图文组合。
* **验收标准 (ACs):**
    1. 用户能将“多列图文模块”添加到画布上。
    2. 用户能在属性面板中选择四种预设布局之一。
    3. 模块中的图片区域配置能力与Story 1.6一致。
    4. 模块中的文本区域配置能力与Story 1.5一致。
    5. 导出的HTML能支持响应式堆叠。
    6. MVP阶段，两列布局的列宽比例采用固定的预设值。
    7. 编辑器中的预览能实时更新。

##### **Story 2.2: 视频播放器模块集成与配置**
* **用户故事:** 作为运营专员，我希望能在Pagemaker编辑器中使用“视频播放器模块”，并能配置来自R-Cabinet或外部链接的视频，以及可选地设置其封面图和播放选项，以在页面中生动地展示视频内容。
* **验收标准 (ACs):**
    1. 用户能将“视频播放器模块”添加到画布上。
    2. 用户能在属性面板中选择视频来源：R-Cabinet或外部链接。
    3. 当来源为R-Cabinet时，用户能选择一个已上传的视频文件。
    4. 当来源为外部链接时，用户能粘贴有效的URL，系统能嵌入播放器。
    5. 用户能为视频选择性地指定一个自定义封面图。
    6. 用户能为视频配置是否自动播放和是否循环播放。
    7. 导出的HTML能正确转换为嵌入式播放器代码。
    8. 编辑器中的预览能正确显示可交互的视频播放器。

##### **Story 2.3: 页面/模板管理视图框架**
* **用户故事:** 作为运营专员，我希望能有一个“页面管理”视图，可以列表形式清晰地查看我所有创建的页面或自定义布局模板，并能按文件夹/店铺进行组织，以便我能有效地管理我的工作成果。
* **验收标准 (ACs):**
    1. CMS中应有清晰的入口进入“页面/模板管理”视图。
    2. 视图以列表形式展示所有已创建的页面/模板。
    3. 列表至少显示名称、类型、最后修改日期。
    4. 视图提供按文件夹或店铺名称进行筛选或分组的功能。
    5. 列表中的每一行为后续的管理操作预留UI占位符。
    6. 视图中应包含“创建新页面”的按钮。

##### **Story 2.4: 创建与打开编辑页面/模板**
* **用户故事:** 作为运营专员，我希望能在管理视图中发起“创建新页面”的操作来打开一个空白的编辑器，并且能点击列表中已有的页面，进入其对应的编辑器进行修改，以便我开始新的创作或更新已有内容。
* **验收标准 (ACs):**
    1. 点击“创建新页面”按钮后，系统跳转到新的、空白的编辑器界面。
    2. 创建时，系统提示用户为新页面命名并指定乐天“目标区域”。
    3. 点击列表中已有的页面/模板，系统能正确加载其内容并跳转到编辑器界面。
    4. 在编辑器界面有“保存”按钮。点击后, **前端应调用 `PUT /api/v1/pages/{id}/` API** 将页面数据（注意：模块配置信息将作为统一的JSON结构保存在`PageTemplate`模型的`content`字段中）发送到后端进行保存。
    5. 保存并退出编辑器后，用户能返回管理视图，并看到更新信息。

##### **Story 2.5: 复制与删除页面/模板**
* **用户故事:** 作为运营专员，我希望能在管理视图中对已有的页面或布局模板执行“复制”（克隆）和“删除”操作，以便我高效复用现有设计或清理不再需要的草稿。
* **验收标准 (ACs):**
    1. 点击“复制”操作后，系统在列表中即时创建一个该页面/模板的完整副本。
    2. 新创建的副本有明确的标识（如名称添加“- 副本”后缀），修改日期为当前时间。
    3. 点击“删除”操作后，系统必须弹出二次确认对话框以防误删。
    4. 当用户在确认对话框中确认删除后，前端应调用 **`DELETE /api/v1/pages/{id}/` API**，成功后该页面/模板条目从列表中被移除。

## 7. MVP范围之外的想法 (Out of Scope Ideas Post MVP)
* **模板风格/主题自定义 (层面二):** 允许用户创建和切换全局的视觉主题（字体、颜色方案等）。
* **更丰富的模块和布局选项:** 更复杂的多列图文模块、促销倒计时模块等。
* **HTML代码导入功能:** 允许用户将外部的HTML片段导入到Pagemaker中。
* **与乐天API的深度集成:** 实现创建/更新页面内容的自动化发布。
* **关联商品功能:** 在页面模块中通过API便捷地添加和展示其他关联商品。
* **用户自定义模板库:** 用户可以将自己常用的模块组合或整个页面布局保存为个人模板。
* **高级模块样式:** 分隔模块的复杂宽度/对齐，标题模块的文本颜色，文本模块的斜体/列表格式，表格模块更细致的单元格/行样式。
* **引入前后端缓存机制 (Redis, SWR/React Query)** 

## 8. 关键参考文件 (Key Reference Documents)
*(此部分将在后续阶段，当架构文档等文件创建后进行填充)*

## 9. 变更日志 (Change Log)
| 版本 | 日期 | 变更描述 | 作者 |
| --- | --- | --- | --- |
| 1.0 | {TBD} | 初始PRD创建 | John |

----- END PRD START CHECKLIST OUTPUT ------

### PRD & EPIC VALIDATION SUMMARY

| Category | Status | Critical Issues |
|---|---|---|
| 1. Problem Definition & Context | PASS | |
| 2. MVP Scope Definition | PASS | |
| 3. User Experience Requirements | PASS | |
| 4. Functional Requirements | PASS | |
| 5. Non-Functional Requirements | PASS | |
| 6. Epic & Story Structure | PASS | |
| 7. Technical Guidance | PASS | |
| 8. Cross-Functional Requirements | PASS | |
| 9. Clarity & Communication | PASS | |

**Final Decision:** READY FOR ARCHITECT

----- END Checklist START Design Architect UI/UX Specification Mode Prompt ------
*(本项目Pagemaker包含UI，故此部分留空，待后续Design Architect创建前端UI/UX规范)*

----- END Design Architect UI/UX Specification Mode Prompt START Architect Prompt ------

## Initial Architect Prompt

This Product Requirements Document (PRD) provides the full context for the Pagemaker project. Please start in 'Architecture Creation Mode', review this PRD thoroughly, and work with the user to create the architecture document and solution designs. Pay close attention to the "Technical Assumptions" section for initial guidance on architecture patterns, technology preferences, and known constraints.